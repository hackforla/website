name: WR Pull Request Trigger
on:
  workflow_run:
    workflows: ["Pull Request Trigger"]
    types: [completed]

jobs:  
  Hello-World:
    runs-on: ubuntu-latest
    steps:
     - run: echo "üç∫ The job was automatically triggered by a ${{ github.event_name }} event."

# The purpose of Move-PR is to gather merged PRs from every location 
# into a single column so that in the next step they may be deleted.
  Move-PR:
    runs-on: ubuntu-latest
    if: ${{ github.event.pull_request.merged == true }} 
    steps:
      - name: Move PR
        uses: alex-page/github-project-automation-plus@v0.8.1
        with:
          project: 'Project Board 77'
          column: 'test-approved-by-reviewer (Automated Column, do not place items here manually)'
          repo-token: ${{ secrets.GHPROJECT_TOKEN }}

# The purpose of Delete-Merged-PRs is to delete 
  Delete-Merged-PRs:
    needs: Move-PR
    runs-on: ubuntu-latest
    if: ${{ github.event.pull_request.merged == true }} 
    steps: 
      - name: Delete Merged PRs
        uses: alex-page/github-project-automation-plus@v0.8.1
        with:
          project: 'Project Board 77'
          column: 'test-approved-by-reviewer (Automated Column, do not place items here manually)'            
          repo-token: ${{ secrets.GHPROJECT_TOKEN }}
          action: delete
